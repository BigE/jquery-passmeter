(function(a){a.fn.passmeter=function(c){var e=a.extend(a.fn.passmeter.defaults,c),g="abcdefghijklmnopqrstuvwxyz",b="01234567890",d="!@#$%^&*()",f=a("<div></div>").addClass("passmeter").append(a("<a></a>").attr("href","#").addClass("passmeter_label").text("Password Strength:").click(function(h){h.preventDefault();a(this).parent().find(".passmeter_rules").slideToggle()})).append(a("<span></span>").addClass("passmeter_strength").text("Too short")).append(a("<div></div>").addClass("passmeter_meter").append(a("<div></div>").addClass("passmeter_inner"))).append(a("<div></div>").addClass("passmeter_rules").css("display","none").html("<ul><li>Minimum {0} characters in length</li><li>Contains {1}/4 of the following items:</li><ul><li>Uppercase Letters</li><li>Lowercase Letters</li><li>Numbers</li><li>Symbols</li></ul></ul>"));if(e.selector==null){window.console&&console.error("cannot initialize password meter due to a missing selector");return this}return this.each(function(){var h=a.extend(true,{},a.fn.passmeter.score);a(this).append(a(f));a(this).find(".passmeter_rules").html(a.fn.passmeter.format(a(this).find(".passmeter_rules").html(),e.min,e.require));a(e.selector).keyup(function(){var m=0,r=a(this).val();if(r.length>=e.min){h.addition.len=r.length;h.addition.lower=a.fn.passmeter.match(/[a-z]/g,r);h.addition.upper=a.fn.passmeter.match(/[A-Z]/g,r);h.addition.numbers=a.fn.passmeter.match(/[0-9]/g,r);h.addition.middle=a.fn.passmeter.match(/[0-9!@#\$%\^&*(){}.,'"]/g,r.substr(1,(r.length-2)))}else{h=a.extend(true,{},a.fn.passmeter.score)}h.addition.symbols=a.fn.passmeter.match(/[!@#\$%\^&*()\{\}\.,'"]/g,r);h.subtraction.consecutive.lower=a.fn.passmeter.match(/[a-z]+/g,r,true);h.subtraction.consecutive.numbers=a.fn.passmeter.match(/[0-9]+/g,r,true);h.subtraction.consecutive.upper=a.fn.passmeter.match(/[A-Z]+/g,r,true);if(r.match(/^[a-z]+$/i)){h.subtraction.letters=r.length}if(r.match(/^[0-9]+$/)){h.subtraction.numbers=r.length}if(a.fn.passmeter.match(/(.)[^\1]*\1/,r)){for(var q=0;q<r.length;q++){var i=false;for(var s=0;s<r.length;s++){if(r[q]==r[s]&&q!=s){i=true;h.total.subtraction.repeat+=Math.abs(r.length/(s-q))}}if(i){h.subtraction.repeat+=1;var n=(r.length-h.subtraction.repeat);h.total.subtraction.repeat=(n)?Math.ceil(h.total.subtraction.repeat/n):Math.ceil(h.total.subtraction.repeat)}}}h.subtraction.sequential.letters=h.subtraction.sequential.numbers=h.subtraction.sequential.symbols=0;for(var p=0;p<(g.length-3);p++){var l=g.substr(p,3),j=l.split("").reverse().join("");if(r.toLowerCase().indexOf(l)!=-1||r.toLowerCase().indexOf(j)!=-1){h.subtraction.sequential.letters+=1}}for(var p=0;p<(b.length-3);p++){var l=b.substr(p,3),j=l.split("").reverse().join("");if(r.indexOf(l)!=-1||r.indexOf(j)!=-1){h.subtraction.sequential.numbers+=1}}for(var p=0;p<(d.length-3);p++){var l=d.substr(p,3),j=l.split("").reverse().join("");if(r.indexOf(l)!=-1||r.indexOf(j)!=-1){h.subtraction.sequential.symbols+=1}}h.addition.required=0;if(h.addition.lower>0){h.addition.required+=1}if(h.addition.upper>0){h.addition.required+=1}if(h.addition.numbers>0){h.addition.required+=1}if(h.addition.symbols>0){h.addition.required+=1}if(r.length>=e.min){h.addition.required+=1}m=a.fn.passmeter.total(h,e.require);var k=a(f).find(".passmeter_meter"),o=a(f).find(".passmeter_strength");a(k).find(".passmeter_inner").css("width",m+"%");if(r.length<e.min){a(o).text("Too short");a(k).attr("level","short")}else{if(h.addition.required<e.require){a(o).text("Invaild password");a(k).attr("level","short")}else{if(m>=0&&m<=25){a(o).text("Weak");a(k).attr("level","weak")}else{if(m>25&&m<=50){a(o).text("Fair");a(k).attr("level","fair")}else{if(m>50&&m<=75){a(o).text("Good");a(k).attr("level","good")}else{if(m>0&&m<100){a(o).text("Strong");a(k).attr("level","strong")}else{a(o).text("Strongest");a(k).attr("level","strongest")}}}}}}if(e.callback&&typeof(e.callback)=="function"){e.callback.call(this,h,m)}}).keyup()})};a.fn.passmeter.defaults={callback:null,min:6,require:3,selector:null};a.fn.passmeter.format=function(c){var b=Array.prototype.slice.call(arguments,1);return c.replace(/{(\d+)}/g,function(d,e){return typeof b[e]!="undefined"?b[e]:d})};a.fn.passmeter.match=function(f,d,c){var b=d.match(f);if(b){if(c==true){var e=0;a.each(b,function(){e+=(this.length-1)});return e}return b.length}return 0};a.fn.passmeter.score={addition:{len:0,lower:0,middle:0,numbers:0,required:0,symbols:0,upper:0},subtraction:{consecutive:{lower:0,numbers:0,upper:0},sequential:{letters:0,numbers:0,symbols:0},letters:0,numbers:0,repeat:0},total:{addition:{len:0,lower:0,middle:0,numbers:0,required:0,symbols:0,upper:0},subtraction:{consecutive:{lower:0,numbers:0,upper:0},sequential:{letters:0,numbers:0,symbols:0},letters:0,numbers:0,repeat:0}}};a.fn.passmeter.total=function(d,c){var b=0;if(!d.subtraction.letters||(d.subtraction.letters&&d.addition.lower&&d.addition.upper)){b+=d.total.addition.lower=((d.addition.lower>0)?(d.addition.len-d.addition.lower):0)*2;b+=d.total.addition.upper=((d.addition.upper>0)?(d.addition.len-d.addition.upper):0)*2}else{d.total.addition.lower=0;d.total.addition.upper=0}if(!d.subtraction.numbers){b+=d.total.addition.numbers=d.addition.numbers*4}else{d.total.addition.numbers=0}b+=d.total.addition.len=d.addition.len*3;b+=d.total.addition.middle=d.addition.middle*2;b+=d.total.addition.symbols=d.addition.symbols*6;if(d.addition.required>=c){b+=d.total.addition.required=d.addition.required*2}b-=d.total.subtraction.letters=d.subtraction.letters;b-=d.total.subtraction.numbers=d.subtraction.numbers;b-=d.total.subtraction.consecutive.lower=d.subtraction.consecutive.lower*2;b-=d.total.subtraction.consecutive.numbers=d.subtraction.consecutive.numbers*2;b-=d.total.subtraction.consecutive.upper=d.subtraction.consecutive.upper*2;b-=d.total.subtraction.sequential.letters=d.subtraction.sequential.letters*3;b-=d.total.subtraction.sequential.numbers=d.subtraction.sequential.numbers*3;b-=d.total.subtraction.sequential.symbols=d.subtraction.sequential.symbols*3;if(b>100){b=100}else{if(b<0){b=0}}return b}}(jQuery));