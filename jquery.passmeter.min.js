(function(a){a.fn.passmeter=function(c){var e=a.extend(a.fn.passmeter.defaults,c),g="abcdefghijklmnopqrstuvwxyz",b="01234567890",d="!@#$%^&*()",f=a("<div></div>").addClass("passmeter").append(a("<a></a>").attr("href","#").addClass("passmeter_label").text("Password Strength:").click(function(h){console.log("clicky",h);h.preventDefault();a(this).parent().find(".passmeter_rules").slideToggle()})).append(a("<span></span>").addClass("passmeter_strength").text("Too short")).append(a("<div></div>").addClass("passmeter_meter").append(a("<div></div>").addClass("passmeter_inner"))).append(a("<div></div>").addClass("passmeter_rules").css("display","none").append(a("<ul></ul>").addClass("fa-ul").append(a("<li></li>").addClass("passmeter_min").html('<i class="fa fa-li fa-circle-o"></i>Minimum {0} characters in length')).append(a("<li></li>").addClass("passmeter_required").html('<i class="fa fa-li fa-circle-o"></i>Contains {1}/4 of the following items:').append(a("<ul></ul>").addClass("fa-ul").append(a("<li></li>").addClass("passmeter_upper").html('<i class="fa fa-li fa-circle-o"></i>Uppercase Letters')).append(a("<li></li>").addClass("passmeter_lower").html('<i class="fa fa-li fa-circle-o"></i>Lowercase Letters')).append(a("<li></li>").addClass("passmeter_numbers").html('<i class="fa fa-li fa-circle-o"></i>Numbers')).append(a("<li></li>").addClass("passmeter_symbols").html('<i class="fa fa-li fa-circle-o"></i>Symbols'))))));if(e.password==null){window.console&&console.error("cannot initialize password meter due to a missing selector");return this}if(e.confirm!==null){a(f).find(".passmeter_required").after(a("<li></li>").addClass("passmeter_confirm").html('<i class="fa fa-li fa-circle-o"></i>Passwords Match'))}return this.each(function(){var h=a.extend(true,{},a.fn.passmeter.score);a(this).append(a(f));a(this).find(".passmeter_rules").html(a.fn.passmeter.format(a(this).find(".passmeter_rules").html(),e.min,e.require));a(document).on({focusin:function(i){a.fn.passmeter.focusin(i,e)},focusout:function(i){a.fn.passmeter.focusout(i,e)}},e.password);if(e.confirm!==null){a(document).on({focusin:function(i){a.fn.passmeter.focusin(i,e)},focusout:function(i){a.fn.passmeter.focusout(i,e)}},e.confirm);a(e.confirm).keyup(function(){var i=a(e.password).val(),j=a(this).val();if(i.length>0&&i===j){a(".passmeter_confirm > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_confirm > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}})}a(e.password).keyup(function(){var n=0,s=a(this).val(),i=null;h.addition.len=s.length;h.addition.lower=a.fn.passmeter.match(/[a-z]/g,s);h.addition.upper=a.fn.passmeter.match(/[A-Z]/g,s);h.addition.numbers=a.fn.passmeter.match(/[0-9]/g,s);h.addition.middle=a.fn.passmeter.match(/[0-9!@#\$%\^&*(){}.,'"]/g,s.substr(1,(s.length-2)));h.addition.symbols=a.fn.passmeter.match(/[!@#\$%\^&*()\{\}\.,'"]/g,s);h.subtraction.consecutive.lower=a.fn.passmeter.match(/[a-z]+/g,s,true);h.subtraction.consecutive.numbers=a.fn.passmeter.match(/[0-9]+/g,s,true);h.subtraction.consecutive.upper=a.fn.passmeter.match(/[A-Z]+/g,s,true);if(s.match(/^[a-z]+$/i)){h.subtraction.letters=s.length}if(s.match(/^[0-9]+$/)){h.subtraction.numbers=s.length}if(a.fn.passmeter.match(/(.)[^\1]*\1/,s)){for(var r=0;r<s.length;r++){var j=false;for(var t=0;t<s.length;t++){if(s[r]==s[t]&&r!=t){j=true;h.total.subtraction.repeat+=Math.abs(s.length/(t-r))}}if(j){h.subtraction.repeat+=1;var o=(s.length-h.subtraction.repeat);h.total.subtraction.repeat=(o)?Math.ceil(h.total.subtraction.repeat/o):Math.ceil(h.total.subtraction.repeat)}}}h.subtraction.sequential.letters=h.subtraction.sequential.numbers=h.subtraction.sequential.symbols=0;for(var q=0;q<(g.length-3);q++){var m=g.substr(q,3),k=m.split("").reverse().join("");if(s.toLowerCase().indexOf(m)!=-1||s.toLowerCase().indexOf(k)!=-1){h.subtraction.sequential.letters+=1}}for(var q=0;q<(b.length-3);q++){var m=b.substr(q,3),k=m.split("").reverse().join("");if(s.indexOf(m)!=-1||s.indexOf(k)!=-1){h.subtraction.sequential.numbers+=1}}for(var q=0;q<(d.length-3);q++){var m=d.substr(q,3),k=m.split("").reverse().join("");if(s.indexOf(m)!=-1||s.indexOf(k)!=-1){h.subtraction.sequential.symbols+=1}}h.addition.required=0;if(h.addition.lower>0){h.addition.required+=1;a(".passmeter_lower > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_lower > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(h.addition.upper>0){h.addition.required+=1;a(".passmeter_upper > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_upper > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(h.addition.numbers>0){h.addition.required+=1;a(".passmeter_numbers > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_numbers > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(h.addition.symbols>0){h.addition.required+=1;a(".passmeter_symbols > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_symbols > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(s.length>=e.min){h.addition.required+=1;a(".passmeter_min > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_min > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(h.addition.required>e.require){a(".passmeter_required > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_required > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}if(e.confirm!==null){i=a(e.confirm).val();if(s.length>0&&s===i){a(".passmeter_confirm > .fa").removeClass("fa-circle-o").addClass("fa-check-circle-o")}else{a(".passmeter_confirm > .fa").removeClass("fa-check-circle-o").addClass("fa-circle-o")}}n=a.fn.passmeter.total(h,e.require);var l=a(f).find(".passmeter_meter"),p=a(f).find(".passmeter_strength");a(l).find(".passmeter_inner").css("width",n+"%");if(s.length<e.min){a(p).text("Too short");a(l).attr("level","short")}else{if(h.addition.required<e.require){a(p).text("Invaild password");a(l).attr("level","short")}else{if(n>=0&&n<=25){a(p).text("Weak");a(l).attr("level","weak")}else{if(n>25&&n<=50){a(p).text("Fair");a(l).attr("level","fair")}else{if(n>50&&n<=75){a(p).text("Good");a(l).attr("level","good")}else{if(n>0&&n<100){a(p).text("Strong");a(l).attr("level","strong")}else{a(p).text("Strongest");a(l).attr("level","strongest")}}}}}}if(e.callback&&typeof(e.callback)=="function"){e.callback.call(this,h,n)}}).keyup()})};a.fn.passmeter.focusin=function(c,b){console.log("focusin",c);if(c.isDefaultPrevented()){return}if(a(c.target).data("clicky")===true){a(c.target).removeData("clicky")}else{if(b.confirm&&c.currentTarget!==null&&c.relatedTarget!==null&&(("#"+c.currentTarget.id===b.password&&"#"+c.relatedTarget.id===b.confirm)||("#"+c.currentTarget.id===b.confirm&&"#"+c.relatedTarget.id===b.password))){return}a(".passmeter_rules:hidden").slideDown()}};a.fn.passmeter.focusout=function(c,b){console.log("focusout",c);if(c.isDefaultPrevented()){return}if(a(c.relatedTarget).hasClass("passmeter_label")){a(c.target).data("clicky",true).focus()}else{if(b.confirm&&c.currentTarget!==null&&c.relatedTarget!==null&&(("#"+c.currentTarget.id===b.password&&"#"+c.relatedTarget.id===b.confirm)||("#"+c.currentTarget.id===b.confirm&&"#"+c.relatedTarget.id===b.password))){return}a(".passmeter_rules:visible").slideUp()}};a.fn.passmeter.defaults={callback:null,confirm:null,min:6,password:null,require:3};a.fn.passmeter.format=function(c){var b=Array.prototype.slice.call(arguments,1);return c.replace(/{(\d+)}/g,function(d,e){return typeof b[e]!="undefined"?b[e]:d})};a.fn.passmeter.match=function(f,d,c){var b=d.match(f);if(b){if(c==true){var e=0;a.each(b,function(){e+=(this.length-1)});return e}return b.length}return 0};a.fn.passmeter.score={addition:{len:0,lower:0,middle:0,numbers:0,required:0,symbols:0,upper:0},subtraction:{consecutive:{lower:0,numbers:0,upper:0},sequential:{letters:0,numbers:0,symbols:0},letters:0,numbers:0,repeat:0},total:{addition:{len:0,lower:0,middle:0,numbers:0,required:0,symbols:0,upper:0},subtraction:{consecutive:{lower:0,numbers:0,upper:0},sequential:{letters:0,numbers:0,symbols:0},letters:0,numbers:0,repeat:0}}};a.fn.passmeter.total=function(d,c){var b=0;if(!d.subtraction.letters||(d.subtraction.letters&&d.addition.lower&&d.addition.upper)){b+=d.total.addition.lower=((d.addition.lower>0)?(d.addition.len-d.addition.lower):0)*2;b+=d.total.addition.upper=((d.addition.upper>0)?(d.addition.len-d.addition.upper):0)*2}else{d.total.addition.lower=0;d.total.addition.upper=0}if(!d.subtraction.numbers){b+=d.total.addition.numbers=d.addition.numbers*4}else{d.total.addition.numbers=0}b+=d.total.addition.len=d.addition.len*2;b+=d.total.addition.middle=d.addition.middle*2;b+=d.total.addition.symbols=d.addition.symbols*6;if(d.addition.required>=c){b+=d.total.addition.required=d.addition.required*2}b-=d.total.subtraction.letters=d.subtraction.letters;b-=d.total.subtraction.numbers=d.subtraction.numbers;b-=d.total.subtraction.consecutive.lower=d.subtraction.consecutive.lower*2;b-=d.total.subtraction.consecutive.numbers=d.subtraction.consecutive.numbers*2;b-=d.total.subtraction.consecutive.upper=d.subtraction.consecutive.upper*2;b-=d.total.subtraction.sequential.letters=d.subtraction.sequential.letters*3;b-=d.total.subtraction.sequential.numbers=d.subtraction.sequential.numbers*3;b-=d.total.subtraction.sequential.symbols=d.subtraction.sequential.symbols*3;if(b>100){b=100}else{if(b<0){b=0}}return b}}(jQuery));